/*!
 The MIT License (MIT) Copyright (c) 2015 popAD, LLC dba Rocket Wagon Labs <lukel99@gmail.com>
 */
;(function(d){var a=5000;var c=function(g,j,i,h){this.x=g;this.y=j;this.size=i;this.color=h};c.prototype.mapXYToCanvasCoordinates=function(g,j){var i=Math.round((this.x/a)*g);var h=Math.round((this.y/a)*j);return{x:i,y:h}};var f={getRandomStar:function(){var g=Math.floor(Math.random()*(a+1));var k=Math.floor(Math.random()*(a+1));var i=this._getWeightedRandomSize();var h=this._getWeightedRandomColor();var j=this._applyRandomShade(h);return new c(g,k,i,this._getRGBColorString(j))},_getWeightedRandomSize:function(){var h=[1,1.5,2];var g=[0.8,0.15,0.05];return this._getWeightedRandom(h,g)},_getWeightedRandomColor:function(){var h=[{r:255,g:189,b:111},{r:255,g:221,b:180},{r:255,g:244,b:232},{r:251,g:248,b:255},{r:202,g:216,b:255},{r:170,g:191,b:255},{r:155,g:176,b:255}];var g=[0.05,0.05,0.05,0.7,0.05,0.05,0.05];return this._getWeightedRandom(h,g)},_getRandomShade:function(){var h=[0.4,0.6,1];var g=[0.5,0.3,0.2];return this._getWeightedRandom(h,g)},_applyRandomShade:function(h){var g=this._getRandomShade();if(g!==1){h.r=Math.floor(h.r*g);h.g=Math.floor(h.g*g);h.b=Math.floor(h.b*g)}return h},_getRGBColorString:function(g){return"rgb("+g.r+","+g.g+","+g.b+")"},_getWeightedRandom:function(n,m){var l=function(o,i){return Math.random()*(i-o)+o};var h=m.reduce(function(i,o){return i+o});var k=l(0,h);var g=0;for(var j=0;j<n.length;j++){g+=m[j];g=+g.toFixed(2);if(k<=g){return n[j]}}}};var b=[];var e=false;d.fn.starfield=function(v,k){var o=d.extend({framerate:8,speedX:4,starDensity:1,mouseScale:1,background:"#000000",seedMovement:true},v);$this=d(this);var j=$this.width();var u=$this.height();var g=j*u;var t=0.002*o.starDensity;var l=Math.floor(g*t);if(o.seedMovement){var q=o.speedX;var p=0}else{var q=0;var p=0}b=[];for(var r=0;r<l;r++){b.push(f.getRandomStar())}var n=function(){d.each(b,function(i,w){var y=w.x-q;var x=w.y-p;if(y<0){y+=a}if(x<0){x+=a}if(y>a){y-=a}if(x>a){x-=a}w.x=y;w.y=x})};var s=function(){var x=document.getElementById(k);var B=x.width;var i=x.height;x.setAttribute("width",B.toString());x.setAttribute("height",i.toString());if(x.getContext){var w=x.getContext("2d");w.clearRect(0,0,B,i);w.fillStyle=o.background;w.fillRect(0,0,B,i);var z=[];z.push(m(0,b.length));z.push(m(Math.floor(b.length/2),b.length));var y=0,C=0,A=0;d.each(b,function(D,F){var E=F.mapXYToCanvasCoordinates(B,i);C=(z.indexOf(y++)>0)?2:0;A=C>0?-1:0;w.fillStyle=F.color;w.fillRect(E.x+A,E.y+A,F.size+C,F.size+C)})}};function m(w,i){return Math.floor(Math.random()*(i-w+1))+w}function h(){n();s()}if(e==false){AppCommon.limitLoop(h,o.framerate);e=true}return this}}(jQuery));