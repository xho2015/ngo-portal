<html>
<head>
<title>createjs</title>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<style>
html, body {
	width: 100%;
	height: 100%;
	font-family: Monospace;
	background-color: #f0f0f0;
	margin: 0px;
	overflow: hidden;
}
</style>
<script src="/app/lib/jquery-1.9.1.min.ngjs" type="text/javascript"></script>
<script src="/app/lib/createjs-0.8.2.min.js" type="text/javascript"></script>

</head>
<body>
	<canvas id="demoCanvas" width="800px" height="310px"></canvas>

	<script type="text/javascript">
	var NPCs = [];
	var spriteContainer = new createjs.Container();

	spriteContainer.x = 0;
	spriteContainer.y = 0;
	spriteContainer.width = 200;
	spriteContainer.height = 210;

	var spriteBMP = new createjs.Bitmap("/app/res/res1.png");
	spriteBMP.y = 30;
	spriteBMP.x = 0;
	var spriteBMP2 = new createjs.Bitmap("/app/res/res1.png");
	spriteBMP2.y = 90;
	spriteBMP2.x = 0;
	var spriteBMP3 = new createjs.Bitmap("/app/res/res1.png");
	spriteBMP3.y = 150;
	spriteBMP3.x = 0;

	var squareUp = new createjs.Shape();
	squareUp.graphics.beginFill("green").drawRect(0, 0, 100, 10);
	squareUp.x = 0;
	squareUp.y = 0;

	squareUp.on("mousedown", function(evt) {
		spriteBMP.y -= 40;
		spriteBMP2.y -= 40;
		spriteBMP3.y -= 40;
		stage.update();
		stage2.update();

	});

	var squareDown = new createjs.Shape();
	squareDown.graphics.beginFill("green").drawRect(0, 0, 100, 10);
	squareDown.x = 0;
	squareDown.y = 200;

	squareDown.on("mousedown", function(evt) {
		spriteBMP.y += 40;
		spriteBMP2.y += 40;
		spriteBMP3.y += 40;
		stage.update();
		stage2.update();
	});

	spriteLabels = new createjs.Text("Hey ! Come talk to me!",
			"14px Arial", "white");
	spriteLabels.y = 11;
	spriteLabels.x = 1;
	spriteLabel = new createjs.Text("Hey ! Come talk to me!", "14px Arial",
			"black");
	spriteLabel.y = 10;

	NPCs.push( spriteBMP, spriteBMP2,
			spriteBMP3, spriteLabels, spriteLabel, squareUp, squareDown);

	for (i in NPCs) {
		spriteContainer.addChild(NPCs[i]);
	}

	var stage = new createjs.Stage("demoCanvas");
	//stage.autoClear = false;
	stage.enableMouseOver();
	var rect = new createjs.Rectangle(0, 0, 200, 210);
	stage.drawRect = rect;

	stage.addChild(spriteContainer);

	var syba = 0, offset = 0;
	spriteContainer.on("pressmove", function(evt) {
		//evt.target.x = evt.stageX;
		//evt.target.y = evt.stageY;
		offset = evt.stageY - syb > 0 ? 3 : -3;
		syb = evt.stageY;
		spriteBMP.y += offset;
		spriteBMP2.y += offset;
		spriteBMP3.y += offset;
		// console.log("evt.target.y="+evt.target.y+",evt.stageY="+evt.stageY)
		stage.update();
		stage2.update();
	});

	spriteBMP.on("mouseover", function(evt) {
		//alert("type: "+evt.type+" target: "+evt.target+" stageX: "+evt.stageX);
		spriteBMP.x += 2;
		spriteBMP.y += 2;
		stage.update();
		stage2.update();
	});
	spriteBMP.on("mouseout", function(evt) {
		//alert("type: "+evt.type+" target: "+evt.target+" stageX: "+evt.stageX);
		spriteBMP.x -= 2;
		spriteBMP.y -= 2;
		stage.update();
		stage2.update();
	});

	spriteBMP.on("pressup", function(evt) {
		console.log("up");
	});

	stage.update();

	console.log("s1. done");
	</script>
	
	
	<script type="text/javascript">
		var aNPCs = [];
		var spriteContainer2 = new createjs.Container();

		spriteContainer2.x = 100;
		spriteContainer2.y = 0;
		spriteContainer2.width = 200;
		spriteContainer2.height = 210;

		var spriteBMPa = new createjs.Bitmap("/app/res/res1.png");
		spriteBMPa.y = 30;
		spriteBMPa.x = 10;	

		var squareUpa = new createjs.Shape();
		squareUpa.graphics.beginFill("green").drawRect(0, 0, 100, 10);
		squareUpa.x = 0;
		squareUpa.y = 0;

		squareUpa.on("mousedown", function(evt) {
			spriteBMPa.y -= 40;
			stage.update();
			stage2.update();
		});

		var squareDowna = new createjs.Shape();
		squareDowna.graphics.beginFill("green").drawRect(0, 0, 100, 10);
		squareDowna.x = 0;
		squareDowna.y = 200;

		squareDowna.on("mousedown", function(evt) {
			spriteBMPa.y += 40;
			stage.update();
			stage2.update();
		});
	
		aNPCs.push( spriteBMPa, squareUpa, squareDowna);
		for (i in aNPCs) {
			spriteContainer2.addChild(aNPCs[i]);
		}

		var stage2 = new createjs.Stage("demoCanvas");
		//stage2.autoClear = false;
		stage2.enableMouseOver();
		var rect2 = new createjs.Rectangle(100, 0, 200, 210);
		stage2.drawRect = rect2;

		stage2.addChild(spriteContainer2);
		stage2.update();

		console.log("s2. done");
	</script>
	
</body>
</html>