var AppModuleDemo1=(function(){var A,c;var q;var x=20;var v=20;var g;var l,p,u;var o,d;var r,t,n=false;var b,H;var J,h;var B=[];var j,k;function G(){if(!Detector.webgl){var L=Detector.getWebGLErrorMessage();alert(L);return}w();i();e();f();F()}function w(){c={width:600,height:500,fullScreen:function(){D(document.documentElement)},exitfullScreen:function(){m(document.documentElement)},hide3d:function(){g.style.visibility="hidden"},show3d:function(){g.style.visibility="visible"},resize:function(){f()}};A=new dat.gui.GUI({autoPlace:false});A.add(c,"width").min(500).max(1902).step(10).listen();A.add(c,"height").min(400).max(1080).step(10).listen();A.add(c,"fullScreen");A.add(c,"exitfullScreen");A.add(c,"hide3d");A.add(c,"show3d");A.add(c,"resize");A.domElement.id="gui";var L=document.getElementById("gui_container");L.appendChild(A.domElement)}function D(L){if(L.requestFullscreen){L.requestFullscreen()}else{if(L.mozRequestFullScreen){L.mozRequestFullScreen()}else{if(L.webkitRequestFullscreen){L.webkitRequestFullscreen()}else{if(L.msRequestFullscreen){L.msRequestFullscreen()}}}}}function m(){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}function i(){q=document.getElementById("panelCanvas");q.onmousedown=y;q.onmouseup=z;q.onmousemove=E;C()}function C(){q=document.getElementById("panelCanvas");var M=q.getContext("2d");var L=M.createLinearGradient(0,0,0,250);L.addColorStop(0,"#000");L.addColorStop(1,"#fff");M.fillStyle=L;M.fillRect(0,0,500,250)}function y(M){M.preventDefault();M.stopPropagation();clickOk=1;var N=parseInt(M.clientX-x);var L=parseInt(M.clientY-v);console.log("onDown  x="+N+",y="+L)}function z(M){M.preventDefault();M.stopPropagation();clickOk=1;var N=parseInt(M.clientX-x);var L=parseInt(M.clientY-v);console.log("OnUp  x="+N+",y="+L)}function E(M){M.preventDefault();M.stopPropagation();clickOk=1;var N=parseInt(M.clientX-x);var L=parseInt(M.clientY-v);console.log("OnMove  x="+N+",y="+L)}function e(){g=document.getElementById("screen3d");j=g.clientWidth;k=g.clientHeight;l=new THREE.PerspectiveCamera(50,j/k,1,12000);l.position.set(0,1000,1000);l.lookAt(new THREE.Vector3());p=new THREE.Scene();var P=new THREE.AxisHelper(120);p.add(P);var O=new THREE.BoxGeometry(50,50,50);H=new THREE.MeshBasicMaterial({color:16711680,opacity:0.3,transparent:true});b=new THREE.Mesh(O,H);p.add(b);J=new THREE.BoxGeometry(50,50,50);h=new THREE.MeshLambertMaterial({color:16693068,map:new THREE.TextureLoader().load("/app/rs/square-outline-textured.ngpng")});var L=new THREE.GridHelper(1000,20);p.add(L);t=new THREE.Raycaster();r=new THREE.Vector2();var Q=new THREE.PlaneBufferGeometry(1000,1000);Q.rotateX(-Math.PI/2);o=new THREE.Mesh(Q,new THREE.MeshBasicMaterial({visible:false}));p.add(o);B.push(o);var M=new THREE.AmbientLight(15790320);p.add(M);var N=new THREE.DirectionalLight(16777215);N.position.set(1,0.75,0.5).normalize();p.add(N);u=new THREE.WebGLRenderer({antialias:true,alpha:true});u.setClearColor(0,0);u.setPixelRatio(window.devicePixelRatio);u.setSize(j,k);g.appendChild(u.domElement);g.addEventListener("mousemove",a,false);g.addEventListener("mousedown",I,false);g.addEventListener("keydown",K,false);g.addEventListener("keyup",s,false);window.addEventListener("resize",f,false)}function f(){c.width=window.innerWidth;c.height=window.innerHeight;g=document.getElementById("screen3d");j=g.clientWidth;k=g.clientHeight;l.aspect=j/k;l.updateProjectionMatrix();u.setSize(j,k);F()}function a(N){N.preventDefault();r.set(((N.clientX-x)/j)*2-1,-((N.clientY-v)/k)*2+1);t.setFromCamera(r,l);var M=t.intersectObjects(B);if(M.length>0){var L=M[0];b.position.copy(L.point).add(L.face.normal);b.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25)}F()}function I(N){N.preventDefault();r.set(((N.clientX-x)/j)*2-1,-((N.clientY-v)/k)*2+1);t.setFromCamera(r,l);var M=t.intersectObjects(B);if(M.length>0){var L=M[0];if(n){if(L.object!=o){p.remove(L.object);B.splice(B.indexOf(L.object),1)}}else{var O=new THREE.Mesh(J,h);O.position.copy(L.point).add(L.face.normal);O.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25);p.add(O);B.push(O)}F()}}function K(L){switch(L.keyCode){case 16:n=true;break}}function s(L){switch(L.keyCode){case 16:n=false;break}}function F(){u.render(p,l)}return{init:G}})();