var AppG1M1Demo1=$.ngoModule(function(){var s,H;var I;var F=20;var E=20;var e;var D,G,w;var g,x;var q,u,t=false;var j,A;var l,d;var a=[];var p,m;function C(){if(!AppCommon.Detector.webgl){var J=AppCommon.Detector.getWebGLErrorMessage();alert(J);return}o();B();f();i()}function o(){H={width:600,height:500,fullScreen:function(){z(document.documentElement)},exitfullScreen:function(){v(document.documentElement)},hide3d:function(){e.style.visibility="hidden"},show3d:function(){e.style.visibility="visible"},resize:function(){onResize()}};s=new dat.gui.GUI({autoPlace:false});s.add(H,"width").min(500).max(1902).step(10).listen();s.add(H,"height").min(400).max(1080).step(10).listen();s.add(H,"fullScreen");s.add(H,"exitfullScreen");s.add(H,"hide3d");s.add(H,"show3d");s.add(H,"resize");s.domElement.id="gui"}function z(J){if(J.requestFullscreen){J.requestFullscreen()}else{if(J.mozRequestFullScreen){J.mozRequestFullScreen()}else{if(J.webkitRequestFullscreen){J.webkitRequestFullscreen()}else{if(J.msRequestFullscreen){J.msRequestFullscreen()}}}}}function v(){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}function c(K){clickOk=1;var L=parseInt(K.clientX-F);var J=parseInt(K.clientY-E)}function h(K){clickOk=1;var L=parseInt(K.clientX-F);var J=parseInt(K.clientY-E)}function k(K){clickOk=1;var L=parseInt(K.clientX-F);var J=parseInt(K.clientY-E)}function B(){e=document.getElementById("three_screen");p=e.clientWidth;m=e.clientHeight;D=new THREE.PerspectiveCamera(50,p/m,1,12000);D.position.set(0,1000,1000);D.lookAt(new THREE.Vector3());G=new THREE.Scene();var N=new THREE.AxisHelper(120);G.add(N);var M=new THREE.BoxGeometry(50,50,50);A=new THREE.MeshBasicMaterial({color:16711680,opacity:0.3,transparent:true});j=new THREE.Mesh(M,A);G.add(j);l=new THREE.BoxGeometry(50,50,50);d=new THREE.MeshLambertMaterial({color:16693068,map:new THREE.TextureLoader().load("/app/res/square-outline-textured.ngpng")});var J=new THREE.GridHelper(1000,20);G.add(J);u=new THREE.Raycaster();q=new THREE.Vector2();var O=new THREE.PlaneBufferGeometry(1000,1000);O.rotateX(-Math.PI/2);g=new THREE.Mesh(O,new THREE.MeshBasicMaterial({visible:false}));G.add(g);a.push(g);var K=new THREE.AmbientLight(15790320);G.add(K);var L=new THREE.DirectionalLight(16777215);L.position.set(1,0.75,0.5).normalize();G.add(L);w=new THREE.WebGLRenderer({antialias:true,alpha:true});w.setClearColor(0,0);w.setPixelRatio(window.devicePixelRatio);w.setSize(p,m);e.appendChild(w.domElement);e.addEventListener("mousemove",y,false);e.addEventListener("mousedown",r,false);e.addEventListener("keydown",n,false);e.addEventListener("keyup",b,false);window.addEventListener("resize",f,false)}function f(){H.width=window.innerWidth;H.height=window.innerHeight;e=document.getElementById("three_screen");p=e.clientWidth;m=e.clientHeight;D.aspect=p/m;D.updateProjectionMatrix();w.setSize(p,m);i()}function y(L){L.preventDefault();q.set(((L.clientX-F)/p)*2-1,-((L.clientY-E)/m)*2+1);u.setFromCamera(q,D);var K=u.intersectObjects(a);if(K.length>0){var J=K[0];j.position.copy(J.point).add(J.face.normal);j.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25)}i()}function r(L){L.preventDefault();q.set(((L.clientX-F)/p)*2-1,-((L.clientY-E)/m)*2+1);u.setFromCamera(q,D);var K=u.intersectObjects(a);if(K.length>0){var J=K[0];if(t){if(J.object!=g){G.remove(J.object);a.splice(a.indexOf(J.object),1)}}else{var M=new THREE.Mesh(l,d);M.position.copy(J.point).add(J.face.normal);M.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25);G.add(M);a.push(M)}i()}}function n(J){switch(J.keyCode){case 16:t=true;break}}function b(J){switch(J.keyCode){case 16:t=false;break}}function i(){w.render(G,D)}return{init:C}}());